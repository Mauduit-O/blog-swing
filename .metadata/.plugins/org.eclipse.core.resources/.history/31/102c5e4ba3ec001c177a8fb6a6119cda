package view;

import javax.swing.JPanel;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

import controller.UserDao;
import model.User;

import javax.swing.JPasswordField;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.util.List;
import java.awt.event.ActionEvent;

public class Login extends JPanel {
	private JTextField input_mail;
	private JPasswordField input_pwd;

	/**
	 * Create the panel.
	 */
	public Login() {
		setLayout(null);
		
		JLabel pwd = new JLabel("Mot de passe");
		pwd.setBounds(111, 232, 91, 16);
		add(pwd);
		
		JLabel loginTitle = new JLabel("Connection");
		loginTitle.setBounds(248, 58, 105, 16);
		add(loginTitle);
		
		JLabel mail = new JLabel("Email");
		mail.setBounds(111, 165, 61, 16);
		add(mail);
		
		input_mail = new JTextField();
		input_mail.setBounds(246, 160, 251, 33);
		add(input_mail);
		input_mail.setColumns(10);
		
		input_pwd = new JPasswordField();
		input_pwd.setBounds(246, 224, 251, 33);
		add(input_pwd);
		
		JButton btn_login = new JButton("Se connecter");
		btn_login.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {
				
				UserDao userDao = new UserDao();
				User user = new User(input_mail.getText(), input_pwd.getPassword().toString());

				List<User> accountList = userDao.read();

				for (User e1 : accountList) {
					System.out.println(e1.getId() + " nom est " +e1.getNom() + e1.getPwd());
					
					if (input_mail.getText().equals(e1.getMail()) && input_pwd.getPassword().equals(e1.getPwd())) {
						 System.out.println("ok");
						JOptionPane.showMessageDialog(btn_login, "connecté");
					} else {
						 System.out.println("ko");
						JOptionPane.showMessageDialog(btn_login, "non connecté");
					}
				};
			}
		});
		btn_login.setBounds(248, 317, 200, 50);
		add(btn_login);
		

	}
	private static class __Tmp {
		private static void __tmp() {
			  javax.swing.JPanel __wbp_panel = new javax.swing.JPanel();
		}
	}
}
